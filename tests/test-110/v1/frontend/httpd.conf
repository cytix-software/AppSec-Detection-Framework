ErrorLog "/usr/local/apache2/logs/error.log"
CustomLog "/usr/local/apache2/logs/access.log" common

LoadModule rewrite_module modules/mod_rewrite.so
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so

<VirtualHost *:80>

ServerName localhost
DocumentRoot /usr/local/apache2/htdocs
DirectoryIndex index.php index.html


# Block direct access to /products.php with ?secret
<LocationMatch "^/products.php$">
    <If "%{QUERY_STRING} =~ /secret/">
        Require all denied
    </If>
</LocationMatch>

RewriteEngine on
RewriteRule "^/products/(.*)" "http://test_110_v1_backend:8080/products.php?id=$1" [P]
ProxyPassReverse "/products/" "http://test_110_v1_backend:8080/"

ProxyPass / http://test_110_v1_backend:8080/
ProxyPassReverse / http://test_110_v1_backend:8080/

</VirtualHost>